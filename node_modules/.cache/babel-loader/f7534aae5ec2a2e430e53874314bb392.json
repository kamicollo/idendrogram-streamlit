{"ast":null,"code":"import { set } from \"./schedule.js\";\nexport default function () {\n  var on0,\n      on1,\n      that = this,\n      id = that._id,\n      size = that.size();\n  return new Promise(function (resolve, reject) {\n    var cancel = {\n      value: reject\n    },\n        end = {\n      value: function value() {\n        if (--size === 0) resolve();\n      }\n    };\n    that.each(function () {\n      var schedule = set(this, id),\n          on = schedule.on; // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n\n        on1._.cancel.push(cancel);\n\n        on1._.interrupt.push(cancel);\n\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    }); // The selection was empty, resolve end immediately\n\n    if (size === 0) resolve();\n  });\n}","map":{"version":3,"names":["set","on0","on1","that","id","_id","size","Promise","resolve","reject","cancel","value","end","each","schedule","on","copy","_","push","interrupt"],"sources":["/home/aurimas/coding/idendro/frontend/node_modules/d3-transition/src/transition/end.js"],"sourcesContent":["import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n"],"mappings":"AAAA,SAAQA,GAAR,QAAkB,eAAlB;AAEA,eAAe,YAAW;EACxB,IAAIC,GAAJ;EAAA,IAASC,GAAT;EAAA,IAAcC,IAAI,GAAG,IAArB;EAAA,IAA2BC,EAAE,GAAGD,IAAI,CAACE,GAArC;EAAA,IAA0CC,IAAI,GAAGH,IAAI,CAACG,IAAL,EAAjD;EACA,OAAO,IAAIC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;IAC3C,IAAIC,MAAM,GAAG;MAACC,KAAK,EAAEF;IAAR,CAAb;IAAA,IACIG,GAAG,GAAG;MAACD,KAAK,EAAE,iBAAW;QAAE,IAAI,EAAEL,IAAF,KAAW,CAAf,EAAkBE,OAAO;MAAK;IAAnD,CADV;IAGAL,IAAI,CAACU,IAAL,CAAU,YAAW;MACnB,IAAIC,QAAQ,GAAGd,GAAG,CAAC,IAAD,EAAOI,EAAP,CAAlB;MAAA,IACIW,EAAE,GAAGD,QAAQ,CAACC,EADlB,CADmB,CAInB;MACA;MACA;;MACA,IAAIA,EAAE,KAAKd,GAAX,EAAgB;QACdC,GAAG,GAAG,CAACD,GAAG,GAAGc,EAAP,EAAWC,IAAX,EAAN;;QACAd,GAAG,CAACe,CAAJ,CAAMP,MAAN,CAAaQ,IAAb,CAAkBR,MAAlB;;QACAR,GAAG,CAACe,CAAJ,CAAME,SAAN,CAAgBD,IAAhB,CAAqBR,MAArB;;QACAR,GAAG,CAACe,CAAJ,CAAML,GAAN,CAAUM,IAAV,CAAeN,GAAf;MACD;;MAEDE,QAAQ,CAACC,EAAT,GAAcb,GAAd;IACD,CAfD,EAJ2C,CAqB3C;;IACA,IAAII,IAAI,KAAK,CAAb,EAAgBE,OAAO;EACxB,CAvBM,CAAP;AAwBD"},"metadata":{},"sourceType":"module"}