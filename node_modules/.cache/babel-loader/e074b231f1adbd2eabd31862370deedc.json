{"ast":null,"code":"import { dispatch } from \"d3-dispatch\";\nimport { dragDisable, dragEnable } from \"d3-drag\";\nimport { interpolateZoom } from \"d3-interpolate\";\nimport { select, pointer } from \"d3-selection\";\nimport { interrupt } from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport { Transform, identity } from \"./transform.js\";\nimport noevent, { nopropagation } from \"./noevent.js\"; // Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\n\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || \"ontouchstart\" in this;\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1), dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1));\n}\n\nexport default function () {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection.property(\"__zoom\", defaultTransform).on(\"wheel.zoom\", wheeled, {\n      passive: false\n    }).on(\"mousedown.zoom\", mousedowned).on(\"dblclick.zoom\", dblclicked).filter(touchable).on(\"touchstart.zoom\", touchstarted).on(\"touchmove.zoom\", touchmoved).on(\"touchend.zoom touchcancel.zoom\", touchended).style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function (collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function () {\n        gesture(this, arguments).event(event).start().zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform).end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function (selection, k, p, event) {\n    zoom.scaleTo(selection, function () {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function (selection, k, p, event) {\n    zoom.transform(selection, function () {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function (selection, x, y, event) {\n    zoom.transform(selection, function () {\n      return constrain(this.__zoom.translate(typeof x === \"function\" ? x.apply(this, arguments) : x, typeof y === \"function\" ? y.apply(this, arguments) : y), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function (selection, x, y, p, event) {\n    zoom.transform(selection, function () {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(typeof x === \"function\" ? -x.apply(this, arguments) : -x, typeof y === \"function\" ? -y.apply(this, arguments) : -y), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k,\n        y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition.on(\"start.zoom\", function () {\n      gesture(this, arguments).event(event).start();\n    }).on(\"interrupt.zoom end.zoom\", function () {\n      gesture(this, arguments).event(event).end();\n    }).tween(\"zoom\", function () {\n      var that = this,\n          args = arguments,\n          g = gesture(that, args).event(event),\n          e = extent.apply(that, args),\n          p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n          w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n          a = that.__zoom,\n          b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n          i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n      return function (t) {\n        if (t === 1) t = b; // Avoid rounding error on end.\n        else {\n          var l = i(t),\n              k = w / l[2];\n          t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k);\n        }\n        g.zoom(null, t);\n      };\n    });\n  }\n\n  function gesture(that, args, clean) {\n    return !clean && that.__zooming || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function event(_event) {\n      if (_event) this.sourceEvent = _event;\n      return this;\n    },\n    start: function start() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n\n      return this;\n    },\n    zoom: function zoom(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function end() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n\n      return this;\n    },\n    emit: function emit(type) {\n      var d = select(this.that).datum();\n      listeners.call(type, this.that, new ZoomEvent(type, {\n        sourceEvent: this.sourceEvent,\n        target: zoom,\n        type: type,\n        transform: this.that.__zoom,\n        dispatch: listeners\n      }), d);\n    }\n  };\n\n  function wheeled(event) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event); // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n\n      clearTimeout(g.wheel);\n    } // If this wheel event won’t trigger a transform change, ignore it.\n    else if (t.k === k) return; // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n\n      if (!g.moved) {\n        var dx = event.clientX - x0,\n            dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n\n      g.event(event).zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event) {\n    for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n      args[_key4 - 1] = arguments[_key4];\n    }\n\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started,\n        i,\n        t,\n        p;\n    nopropagation(event);\n\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function () {\n        touchstarting = null;\n      }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event) {\n    if (!this.__zooming) return;\n\n    for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n      args[_key5 - 1] = arguments[_key5];\n    }\n\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length,\n        i,\n        t,\n        p,\n        l;\n    noevent(event);\n\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n\n    t = g.that.__zoom;\n\n    if (g.touch1) {\n      var p0 = g.touch0[0],\n          l0 = g.touch0[1],\n          p1 = g.touch1[0],\n          l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    } else if (g.touch0) p = g.touch0[0], l = g.touch0[1];else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event) {\n    for (var _len6 = arguments.length, args = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n      args[_key6 - 1] = arguments[_key6];\n    }\n\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length,\n        i,\n        t;\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function () {\n      touchending = null;\n    }, touchDelay);\n\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);else {\n      g.end(); // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n\n      if (g.taps === 2) {\n        t = pointer(t, this);\n\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function (_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function (_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function (_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function (_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function (_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function (_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function (_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function (_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function (_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function () {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function (_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function (_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}","map":{"version":3,"names":["dispatch","dragDisable","dragEnable","interpolateZoom","select","pointer","interrupt","constant","ZoomEvent","Transform","identity","noevent","nopropagation","defaultFilter","event","ctrlKey","type","button","defaultExtent","e","SVGElement","ownerSVGElement","hasAttribute","viewBox","baseVal","x","y","width","height","value","clientWidth","clientHeight","defaultTransform","__zoom","defaultWheelDelta","deltaY","deltaMode","defaultTouchable","navigator","maxTouchPoints","defaultConstrain","transform","extent","translateExtent","dx0","invertX","dx1","dy0","invertY","dy1","translate","Math","min","max","filter","constrain","wheelDelta","touchable","scaleExtent","Infinity","duration","interpolate","listeners","touchstarting","touchfirst","touchending","touchDelay","wheelDelay","clickDistance2","tapDistance","zoom","selection","property","on","wheeled","passive","mousedowned","dblclicked","touchstarted","touchmoved","touchended","style","collection","point","schedule","each","gesture","arguments","start","apply","end","scaleBy","k","p","scaleTo","k0","k1","t0","p0","centroid","p1","invert","scale","translateBy","translateTo","t","transition","tween","that","args","g","w","a","b","i","concat","l","clean","__zooming","Gesture","active","sourceEvent","taps","prototype","emit","key","mouse","touch0","touch1","d","datum","call","target","pow","wheel","clearTimeout","setTimeout","wheelidled","currentTarget","v","view","mousemoved","mouseupped","x0","clientX","y0","clientY","moved","dx","dy","changedTouches","shiftKey","t1","touches","n","length","started","identifier","l0","l1","dp","dl","sqrt","hypot","_","clickDistance"],"sources":["/home/aurimas/coding/idendro/frontend/node_modules/d3-zoom/src/zoom.js"],"sourcesContent":["import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won’t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}